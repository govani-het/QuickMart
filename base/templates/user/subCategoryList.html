<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="keywords"
          content="EcoShop, bootstrap-5, bootstrap, sass, css, HTML Template, HTML,html, bootstrap template, free template, figma, web design, web development,front end, bootstrap datepicker, bootstrap timepicker, javascript, ecommerce template">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="./assets/images/logos/top-logo.png">

    <!--title  -->
    <title>Quickmart: Your One-Stop Destination for Fashion and Style</title>


    <!--------------- swiper-css ---------------->
    <link rel="stylesheet" href="../../static/userResource/css/swiper10-bundle.min.css">

    <!--------------- bootstrap-css ---------------->
    <link rel="stylesheet" href="../../static/userResource/css/bootstrap-5.3.2.min.css">

    <!---------------------- Range Slider ------------------->
    <link rel="stylesheet" href="../../static/userResource/css/nouislider.min.css">

    <!---------------------- Scroll ------------------->
    <link rel="stylesheet" href="../../static/userResource/css/aos-3.0.0.css">

    <!--------------- additional-css ---------------->
    <link rel="stylesheet" href="../../static/userResource/css/style.css">


</head>

<body>


<!--------------- header-section --------------->
{% include 'user/header.html' %}
<!--------------- header-section-end --------------->

<!--------------- products-sidebar-section--------------->
<section class="product product-sidebar footer-padding">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-3">
                <div class="sidebar" data-aos="fade-right">
                    <div class="sidebar-section box-shadows">
                        <div class="sidebar-wrapper">
                            <h3 class="wrapper-heading">SubCategories List</h3>
                            <div class="sidebar-item">
                                <ul class="sidebar-list">
                                    {% for data in subcategory_list %}
                                        <input type="hidden" name="category_id"
                                               value="{{ data['subcategory_category_id'] }}">
                                        <li>
                                            <button onclick="changeProduct('{{ data.subcategory_id }}')"
                                                    name="subcategory_id"><a>{{ data.subcategory_name }}</a>
                                            </button>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        <hr>

                    </div>

                </div>
            </div>

            <div class="col-lg-9">
                <div class="product-sidebar-section" data-aos="fade-up">

                    <div class="row g-5" id="product">
                    {% for data in product_list %}
                        <div class="col-xl-4 col-sm-6">
                            <a href="/user/view_product?product_id={{ data.product_id }}">
                                <div class="product-wrapper" data-aos="fade-up">
                                    <div class="product-img">
                                        <img src="{{ data.product_image_path }}/{{ data.product_image_name }}" alt="product-img">
                                    </div>
                                    <div class="product-info">
                                        <div class="product-description">
                                            <a class="product-details">{{ data.product_name }}</a>
                                            <div class="price">
                                                <span class="new-price">₹{{ data.product_price }}</span>
                                            </div>
                                        </div>

                                        <!-- Each product has its own form now -->
                                        <form action="/user/add_cart" method="POST">
                                            <input type="hidden" name="product_id" value="{{ data.product_id }}">
                                            <input type="hidden" name="price" value="{{ data.product_price }}">
                                            <input type="hidden" name="quantity" value="1">
                                            <div class="product-cart-btn" style="margin-top: 10px">
                                                <button type="submit" class="product-btn">
                                                    <span>
                                                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                                             xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M8.25309 3.32575C8.25309 4.00929 8.25145 4.69283 8.25418 5.37583C8.25527 5.68424 8.31488 5.74439 8.62382 5.74439C9.96351 5.74603 11.3027 5.74275 12.6423 5.74603C13.2723 5.74767 13.7392 6.05663 13.9241 6.58104C14.2204 7.42098 13.6135 8.24232 12.6757 8.25052C11.5914 8.25982 10.507 8.25271 9.42271 8.25271C9.17665 8.25271 8.93058 8.25216 8.68452 8.25271C8.29082 8.2538 8.25363 8.29154 8.25363 8.69838C8.25309 10.0195 8.25637 11.3412 8.25199 12.6624C8.24981 13.2836 7.92555 13.7544 7.39842 13.9305C6.56399 14.2088 5.75799 13.6062 5.74814 12.6821C5.73776 11.7251 5.74596 10.7687 5.74541 9.81173C5.74541 9.41965 5.74705 9.02812 5.74486 8.63604C5.74322 8.30849 5.68964 8.2538 5.36155 8.25326C4.02186 8.25162 2.68272 8.25545 1.34304 8.25107C0.719125 8.24943 0.249414 7.93008 0.0706069 7.40348C-0.212641 6.57065 0.387757 5.75916 1.30968 5.74658C2.14794 5.73564 2.9862 5.74384 3.82446 5.74384C4.3073 5.74384 4.79013 5.74384 5.27351 5.74384C5.72135 5.7433 5.74541 5.71869 5.74541 5.25716C5.74541 3.95406 5.74268 2.65096 5.7465 1.34786C5.74814 0.720643 6.06201 0.253102 6.5875 0.0704598C7.40826 -0.213893 8.21754 0.370671 8.25199 1.27349C8.25254 1.29154 8.25254 1.31013 8.25254 1.32817C8.25309 1.99531 8.25309 2.66026 8.25309 3.32575Z"></path>
                                                        </svg>
                                                    </span>
                                                    <span class="btn-text">Add To Cart</span>
                                                </button>
                                            </div>
                                        </form>

                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                    </div>
                </div>
            </div>


        </div>
    </div>
</section>
<!--------------- products-sidebar-section-end--------------->

<!--------------- footer-section--------------->
{% include 'user/footer.html' %}
<!--------------- footer-section-end--------------->

<script>
    function changeProduct(subcategory_id) {

        var product = document.getElementById('product');

        product.innerHTML = ''; // Clear previous products

        var ajax = new XMLHttpRequest();
        ajax.onreadystatechange = function () {
            if (ajax.readyState === 4) {
                var json = JSON.parse(ajax.responseText);

                for (var i = 0; i < json.length; i++) {
                    var productHTML = `
                                <div class="col-xl-4 col-sm-6">
                            <a href="/user/view_product?product_id=${json[i].product_id}">
                                <div class="product-wrapper" data-aos="fade-up">
                                    <div class="product-img">
                                        <img src="${json[i].product_image_path}/${json[i].product_image_name}" alt="product-img">
                                    </div>
                                    <div class="product-info">
                                        <div class="product-description">
                                            <a class="product-details">${json[i].product_name}</a>
                                            <div class="price">
                                                <span class="new-price">₹${json[i].product_price}</span>
                                            </div>
                                        </div>

                                        <!-- Each product has its own form now -->
                                        <form action="/user/add_cart" method="POST">
                                            <input type="hidden" name="product_id" value="${json[i].product_id}">
                                            <input type="hidden" name="price" value="${json[i].product_price}">
                                            <input type="hidden" name="quantity" value="1">
                                            <div class="product-cart-btn" style="margin-top: 10px">
                                                <button type="submit" class="product-btn">
                                                    <span>
                                                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                                             xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M8.25309 3.32575C8.25309 4.00929 8.25145 4.69283 8.25418 5.37583C8.25527 5.68424 8.31488 5.74439 8.62382 5.74439C9.96351 5.74603 11.3027 5.74275 12.6423 5.74603C13.2723 5.74767 13.7392 6.05663 13.9241 6.58104C14.2204 7.42098 13.6135 8.24232 12.6757 8.25052C11.5914 8.25982 10.507 8.25271 9.42271 8.25271C9.17665 8.25271 8.93058 8.25216 8.68452 8.25271C8.29082 8.2538 8.25363 8.29154 8.25363 8.69838C8.25309 10.0195 8.25637 11.3412 8.25199 12.6624C8.24981 13.2836 7.92555 13.7544 7.39842 13.9305C6.56399 14.2088 5.75799 13.6062 5.74814 12.6821C5.73776 11.7251 5.74596 10.7687 5.74541 9.81173C5.74541 9.41965 5.74705 9.02812 5.74486 8.63604C5.74322 8.30849 5.68964 8.2538 5.36155 8.25326C4.02186 8.25162 2.68272 8.25545 1.34304 8.25107C0.719125 8.24943 0.249414 7.93008 0.0706069 7.40348C-0.212641 6.57065 0.387757 5.75916 1.30968 5.74658C2.14794 5.73564 2.9862 5.74384 3.82446 5.74384C4.3073 5.74384 4.79013 5.74384 5.27351 5.74384C5.72135 5.7433 5.74541 5.71869 5.74541 5.25716C5.74541 3.95406 5.74268 2.65096 5.7465 1.34786C5.74814 0.720643 6.06201 0.253102 6.5875 0.0704598C7.40826 -0.213893 8.21754 0.370671 8.25199 1.27349C8.25254 1.29154 8.25254 1.31013 8.25254 1.32817C8.25309 1.99531 8.25309 2.66026 8.25309 3.32575Z"></path>
                                                        </svg>
                                                    </span>
                                                    <span class="btn-text">Add To Cart</span>
                                                </button>
                                            </div>
                                        </form>

                                    </div>
                                </div>
                            </a>
                        </div>
                `;

                    product.innerHTML += productHTML; // Append to the product container
                }
            }
        };

        ajax.open("GET", `/user/ajax_product_list?subcategory_id=${subcategory_id}`, true);
        ajax.send();
    }

</script>

<!--------------- jQuery ---------------->
<script src="../../static/userResource/js/jquery_3.7.1.min.js"></script>

<!--------------- bootstrap-js ---------------->
<script src="../../static/userResource/js/bootstrap_5.3.2.bundle.min.js"></script>

<!--------------- Range-Slider-js ---------------->
<script src="../../static/userResource/js/nouislider.min.js"></script>

<!--------------- scroll-Animation-js ---------------->
<script src="../../static/userResource/js/aos-3.0.0.js"></script>

<!--------------- swiper-js ---------------->
<script src="../../static/userResource/js/swiper10-bundle.min.js"></script>

<!--------------- additional-js ---------------->
<script src="../../static/userResource/js/ecoshop.js"></script>

</body>

</html>