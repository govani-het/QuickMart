
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="keywords"
        content="EcoShop, bootstrap-5, bootstrap, sass, css, HTML Template, HTML,html, bootstrap template, free template, figma, web design, web development,front end, bootstrap datepicker, bootstrap timepicker, javascript, ecommerce template">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="../../static/userResource/image/top-logo.png">

    <!--title  -->
    <title>EcoShop | Checkout</title>


    <!--------------- swiper-css ---------------->
    <link rel="stylesheet" href="../../static/userResource/css/swiper10-bundle.min.css">

    <!--------------- bootstrap-css ---------------->
    <link rel="stylesheet" href="../../static/userResource/css/bootstrap-5.3.2.min.css">

    <!---------------------- Range Slider ------------------->
    <link rel="stylesheet" href="../../static/userResource/css/nouislider.min.css">

    <!---------------------- Scroll ------------------->
    <link rel="stylesheet" href="../../static/userResource/css/aos-3.0.0.css">

    <!--------------- additional-css ---------------->
    <link rel="stylesheet" href="../../static/userResource/css/style.css">



</head>

<body>

    <!--------------- header-section --------------->
      {% include 'user/header.html' %}
    <!--------------- header-section-end --------------->

    <!--------------- blog-tittle-section---------------->
    <section class="blog about-blog">
        <div class="container">
            <div class="blog-bradcrum">
                <span><a href="index.html">Home</a></span>
                <span class="devider">/</span>
                <span><a href="#">Checkout</a></span>
            </div>
            <div class="blog-heading about-heading">
                <h1 class="heading">Checkout</h1>
            </div>
        </div>
    </section>
    <!--------------- blog-tittle-section-end---------------->

    <!--------------- checkout-section---------------->
    <section class="checkout product footer-padding">
        <div class="container">
            <div class="checkout-section">
                <form action="/user/place_order" method="post">
                <div class="row gy-5 gy-lg-0">
                    <div class="col-lg-6">
                        <div class="checkout-wrapper">
                            <div class="account-section billing-section box-shadows">
                                <h5 class="wrapper-heading">Billing Details</h5>
                                <div class="review-form">
                                    <div class=" account-inner-form">
                                        <div class="review-form-name">
                                            {% if userAddressInfo %}
                                                <input type="hidden" name="address_id" value="{{ userAddressInfo.address_id }}">
                                            {% endif %}
                                            <input type="hidden" name="address_id">
                                            <label for="fname" class="form-label">UserName*</label>
                                            <input type="text" id="username" name="username" value="{{ userinfo.username }}" class="form-control" placeholder="UserName">
                                        </div>

                                    </div>
                                    <div class=" account-inner-form">
                                        <div class="review-form-name">
                                            <label for="email" class="form-label">Email*</label>
                                            <input type="email" id="email" class="form-control" name="email" value="{{ userinfo.email }}"
                                                placeholder="user@gmail.com">
                                        </div>
                                        <div class="review-form-name">
                                            <label for="phone" class="form-label">Phone*</label>
                                            <input type="tel" id="phone" class="form-control" name="phone" value="{{ userinfo.phone }}"
                                                placeholder="+880388**0899">
                                        </div>
                                    </div>
                                    <div class="review-form-name">
                                        <label for="country" class="form-label">City</label>
                                        <select id="city" class="form-select" name="city" onchange="loadArea()">
                                            <option disabled selected>Choose...</option>
                                            {% for data in city %}
                                                {% if data.city_id == userAddressInfo.city %}
                                                    <option value="{{ data.city_id }}" selected>{{ data.city_name }}</option>
                                                {% else %}
                                                    <option value="{{ data.city_id }}">{{ data.city_name }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="review-form-name address-form">
                                        <label for="address" class="form-label">Address*</label>
                                        {% if userAddressInfo %}
                                            <input type="text" id="address" name="address" class="form-control"
                                                placeholder="Enter your Address" value="{{ userAddressInfo.address }}">
                                        {% else %}
                                            <input type="text" id="address" name="address" class="form-control"
                                                placeholder="Enter your Address">
                                        {% endif %}
                                    </div>
                                    <div class=" account-inner-form city-inner-form">
                                        <div class="review-form-name">
                                            <label for="area" class="form-label">Area</label>
                                            <select id="area" class="form-select" name="area">
                                                <option disabled>Choose...</option>
                                                {%  for data in area %}

                                                    <option value="{{ data[1].area_id }}" {% if userAddressInfo and data[1].area_id|int == userAddressInfo.area|int %} selected {% endif %}>{{ data[1].area_name }}</option>

                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="review-form-name">
                                            <label for="number" class="form-label">Postcode / ZIP*</label>
                                            <input type="number" id="number" value="{{ userAddressInfo.pincode }}" name="pincode" class="form-control" placeholder="0000">
                                        </div>
                                    </div>
                                    <h5 class="wrapper-heading">Shipping Address</h5>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="checkout-wrapper">
                            <div class="account-section billing-section box-shadows">
                                <h5 class="wrapper-heading">Order Summary</h5>
                                <div class="order-summery ">
                                    <div class="subtotal product-total">
                                        <h5 class="wrapper-heading">PRODUCT</h5>
                                        <h5 class="wrapper-heading">TOTAL</h5>
                                    </div>
                                    <hr>
                                    <div class="subtotal product-total">
                                        <ul class="product-list">
                                            {% for data in user_cart_data %}
                                            <li>
                                                <div class="product-info">
                                                    <h5 class="wrapper-heading">{{ data[0].product_name }}</h5>
                                                    <p class="paragraph">{{ data[0].product_description }}</p>
                                                </div>
                                                <div class="price">
                                                    <h5 class="wrapper-heading">₹{{ data[1].total_price }}</h5>
                                                </div>
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </div>

                                    <div class="subtotal total">
                                        <h5 class="wrapper-heading">TOTAL</h5>
                                        <input type="hidden" name="final_price" value="{{ final_price }}">
                                        <h5 class="wrapper-heading price">₹{{ final_price }}</h5>
                                    </div>
                                    <div class="subtotal payment-type">

                                        <div class="checkbox-item">
                                            <input type="radio" id="cash" name="payment_type" value="COD">
                                            <div class="cash">
                                                <h5 class="wrapper-heading">Cash on Delivery</h5>
                                            </div>
                                        </div>
                                        <div class="checkbox-item">
                                            <input type="radio" id="credit" name="payment_type" value="UPI">
                                            <div class="credit">
                                                <h5 class="wrapper-heading">UPI</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="shop-btn">Place Order Now</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </section>
    <!--------------- checkout-section-end---------------->

    <!--------------- footer-section--------------->
      {% include 'user/footer.html' %}
    <!--------------- footer-section-end--------------->



<script type="text/javascript">
        function loadArea(){
            var city_id = document.getElementById('city')
            var area_id = document.getElementById('area')

            area_id.innerHTML=''
            var ajax = new XMLHttpRequest();
            ajax.onreadystatechange = function(){

                if (ajax.readyState === 4){
                    var json = JSON.parse(ajax.responseText);

                    for (var i=0; i<json.length; i++){
                        var option = document.createElement("option");
                        option.value = json[i].area_id;
                        option.text = json[i].area_name;
                        area_id.options.add(option);
                    }
                }
            };
            ajax.open('get',"/user/ajax_city?city_id=" + city_id.value,true);
            ajax.send();
        }
    </script>
    <!--------------- jQuery ---------------->
    <script src="../../static/userResource/js/jquery_3.7.1.min.js"></script>

    <!--------------- bootstrap-js ---------------->
    <script src="../../static/userResource/js/bootstrap_5.3.2.bundle.min.js"></script>

    <!--------------- Range-Slider-js ---------------->
    <script src="../../static/userResource/js/nouislider.min.js"></script>

    <!--------------- scroll-Animation-js ---------------->
    <script src="../../static/userResource/js/aos-3.0.0.js"></script>

    <!--------------- swiper-js ---------------->
    <script src="../../static/userResource/js/swiper10-bundle.min.js"></script>

    <!--------------- additional-js ---------------->
    <script src="../../static/userResource/js/ecoshop.js"></script>


</body>

</html>